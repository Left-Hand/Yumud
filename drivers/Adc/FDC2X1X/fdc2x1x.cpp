#include "fdc2x1x.hpp"

using namespace yumud::drivers;


void FDC2X1X::init(){
    writeReg(0x08,0x8329);   //(CHx_RCOUNT*16)/55M ==9.76ms，,每10ms左右可以读一次值
	writeReg(0x09,0x8329);
    writeReg(0x0A,0x8329);	
	writeReg(0x0B,0x8329);

	writeReg(0x10,0x000A);  //设置4个通道最小稳定时间
	writeReg(0x11,0x000A);
	writeReg(0x12,0x000A);
	writeReg(0x13,0x000A);
	
    writeReg(0x14,0x1001); //时钟除以1，设置传感器频率在0.01M到8.5M之间
	writeReg(0x15,0x1001);
	writeReg(0x16,0x1001);
	writeReg(0x17,0x1001);
	
	writeReg(0x19,0x0000); //不设置中断标志位
	writeReg(0x1B,0xC20D);//使能0,1,2,3通道，且带宽设置为10M
 
	writeReg(0x1E,0x8000); //设置4个通道的驱动电流
    writeReg(0x1F,0x8000);
	writeReg(0x20,0x8000);
	writeReg(0x21,0x8000);
 
 	
	writeReg(0x1A,0x1401);	//使能FDC2214,且取内部时钟为参考时钟
}